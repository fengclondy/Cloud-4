
<!DOCTYPE html>
<!--[if IE 8]><html class="ie8 oldie"><![endif]-->
<!--[if IE 9]><html class="ie9 oldie"><![endif]-->
<!--[if gt IE 9]><!--><html><!--<![endif]-->
<head>




    <title>海恒智能</title>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="This is my page">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script type="text/javascript" src="js/Chart.js" ></script>
    <script type="text/javascript" src="js/echarts.common.min.js" ></script>
    <script type="text/javascript" src="js/DefaultConfig.js" ></script>
    <script type="text/javascript" src="js/jquery.min.js" ></script>
    <script type="text/javascript" src="js/common.js" ></script>
    <script type="text/javascript" src="plugins/pagination/pagination.js"></script>
    <script type="text/javascript" src="js/loadlibrary/loadLibrary.js"></script>
    <script type="text/javascript" src="js/underscore/underscore-min.js"></script>
    <script type="text/javascript" src="plugins/layer/layer.js"></script>

    <link rel="stylesheet" href="css/jqueryui.css">
    <link rel="stylesheet" href="css/theme.css">
    <script src="js/jqueryui.js"></script>
    <script src="js/datepicker.js"></script>
    <script src="js/jqueryuitimepicker.js"></script>
    <script type="text/javascript">
        $(function(){
            loadLibrary.init({
                nodeName:"SCRIPT",
                src:"/cloudviewservice_devicemonitor/"
            })
        });
        //调用
        // 		loadLibrary("layer.js,jquery")
    </script>
    <!--[if IE]>
    <link rel="stylesheet" type="text/css" href="css/ie.css" />
    <![endif]-->
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.js" ></script>
    <script type="text/javascript" src="js/ie.js" ></script>
    <![endif]-->



    <style type="text/css">
    </style>
</head>
<body>
<div class="g-loading"></div>



<div class="g-loading"></div>
<div class="g-header">
    <a href="" class="logo"></a>
    <a class="exit" href=""><span	class="icon"></span>退出</a>
    <div class="status">
        <span class="icon"></span>系统管理员
    </div>
    <div class="g-select language">
        <span class="icon"></span>
        <select id="langSelect">
            <option value="zh_CN" selected>中文</option>
            <option value="cn_US">英文</option>
        </select> <span class="arr-icon"></span>
    </div>
</div>
<div class="page-title-bar">
    <span class="title">节点监控<a href="help-page.html" target="_blank" class="g-help"></a></span>

    <div class="choose-lib">
        <div class="g-select">
            <select id="machineType">
                <option value="-1" selected>全部显示</option>
                <option value="0">视图节点</option>
                <option value="1">业务节点</option>
                <option value="2">数据节点</option>
            </select>
            <span class="arr-icon"></span>
        </div>
    </div>


    <div class="form-wrap fr">
        <span class="t fl">维护</span>
        <div class="g-select">
            <select id="machineCmd">
                <option value="-1" selected>选择指令</option>
                <option value="1">切换主节点</option>
                <option value="2">切换备节点</option>
                <option value="3">关机</option>
                <option value="4">重启</option>
            </select>
            <span class="arr-icon"></span>
        </div>
        <div id="sendbtn" class="btn send">发送</div>
        <div class="g-select">
            <select id="machineState">
                <option value="-1" selected>选择状态</option>
                <option value="0">正常</option>
                <option value="1">报警</option>
                <option value="2">失效</option>
            </select>
            <span class="arr-icon"></span>
        </div>
        <input type="text" name="keyWord" id="" class="input g-input" placeholder="输入设备名" />
        <div href="" class="btn search">查询</div>
    </div>
</div>



<div class="main">
    <div class="machine-list">
        <div class="item-wrap">
            <div class="item">
                <div class="sec1">
                    <div class="g-checkbox"><input type="checkbox" name="NODE_001"></div>
                    <span class="machine-name">借点001</span>
                </div>
                <div class="sec2"><ul class="device_state"></ul></div>
                <div class="sec3">ID:NODE_001<span class="status">正常</span><div class="check-detail">查看详情</div></div>
            </div>
            <div class="item">
                <div class="sec1">
                    <div class="g-checkbox"><input type="checkbox" name="NODE_001"></div>
                    <span class="machine-name">借点001</span>
                </div>
                <div class="sec2"><ul class="device_state"></ul></div>
                <div class="sec3">ID:NODE_001<span class="status">正常</span><div class="check-detail">查看详情</div></div>
            </div>
            <div class="item">
                <div class="sec1">
                    <div class="g-checkbox"><input type="checkbox" name="NODE_001"></div>
                    <span class="machine-name">借点001</span>
                </div>
                <div class="sec2"><ul class="device_state"></ul></div>
                <div class="sec3">ID:NODE_001<span class="status">正常</span><div class="check-detail">查看详情</div></div>
            </div>
            <div class="item">
                <div class="sec1">
                    <div class="g-checkbox"><input type="checkbox" name="NODE_001"></div>
                    <span class="machine-name">借点001</span>
                </div>
                <div class="sec2"><ul class="device_state"></ul></div>
                <div class="sec3">ID:NODE_001<span class="status">正常</span><div class="check-detail">查看详情</div></div>
            </div>
            <div class="item">
                <div class="sec1">
                    <div class="g-checkbox"><input type="checkbox" name="NODE_001"></div>
                    <span class="machine-name">借点001</span>
                </div>
                <div class="sec2"><ul class="device_state"></ul></div>
                <div class="sec3">ID:NODE_001<span class="status">正常</span><div class="check-detail">查看详情</div></div>
            </div>
            <div class="item">
                <div class="sec1">
                    <div class="g-checkbox"><input type="checkbox" name="NODE_001"></div>
                    <span class="machine-name">借点001</span>
                </div>
                <div class="sec2"><ul class="device_state"></ul></div>
                <div class="sec3">ID:NODE_001<span class="status">正常</span><div class="check-detail">查看详情</div></div>
            </div>
        </div>
    </div>
</div>

<div class="paging-bar">
    <div class="left">
    </div>
    <div class="right">
        <div class="prev-page">上一页</div>
        <ul>
            <li class="active">1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>...</li>
            <li>50</li>
            <li>120</li>
        </ul>
        <div class="next-page">下一页</div>
    </div>
    <span class="total-page fr">共500</span>
</div>
<div class="form-device-dialog">
    <div class="title">NODE_001</div>
    <div class="device-header">
        <ul>
            <li class="active">
                <div class="head-title">消息队列长度</div>
            </li>
            <li>
                <div class="head-title">消息处理时长</div>
            </li>
            <li>
                <div class="head-title">消息等待时延</div>
            </li>
        </ul>
    </div>
    <div class="device-content">
        <div id="main" style="width:860px;height:600px;"></div>
        <!--<canvas labelStep='4' id="deviceChart" width="750px" height="500px"></canvas>-->
    </div>
</div>
<script type="text/javascript">
    $(function(){
        var detailLayer = null;
        var deviceChart = null;
        //var ctx = document.getElementById("deviceChart").getContext("2d");
        var myChart = echarts.init(document.getElementById('main'));
        var　option = {
            title: {
                text: null
                //subtext: '纯属虚构'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data:['最新队列字节数']
            },
            toolbox: {
                show: true,
                feature: {
                    dataView: {readOnly: false},
                    restore: {},
                    saveAsImage: {}
                }
            },
            dataZoom: {
                show: false,
                start: 0,
                end: 100
            },
            xAxis: [
                {
                    type: 'category',
                    boundaryGap: true,
                    data: (function (){
                        var now = new Date();
                        var res = [];
                        var len = 10;
                        while (len--) {
                            res.unshift(now.toLocaleTimeString().replace(/^\D*/,''));
                            now = new Date(now - 2000);
                        }
                        return res;
                    })()
                },
                {
                    type: 'category',
                    boundaryGap: true,
                    data: (function (){
                        var res = [];
                        var len = 10;
                        while (len--) {
                            res.push(len + 1);
                        }
                        return res;
                    })()
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    scale: true,
                    name: '价格',
                    max: 10000,
                    min: 0,
                    boundaryGap: [0.2, 0.2]
                }
            ],
            series: [
                {
                    name:'最新队列字节数',
                    type:'line',
                    data:(function (){
                        var res = [];
                        var len = 0;
                        while (len < 10) {
                            res.push((Math.ceil(Math.random()*20) *500));
                            len++;
                        }
                        return res;
                    })()
                }
            ]
        };
        (function mainHeightController(){
            var winH = $(window).height();
            var headerH = $(".g-header").outerHeight();
            var pageTitleBar = $(".page-title-bar").outerHeight();
            var pagingBarH = $(".paging-bar").outerHeight();

            $(".main").css({
                "min-height":winH - headerH - pagingBarH -pageTitleBar,
                "max-height":"auto"
            });
        })();

        /**加载页面**/
        $itemWrap=$("div.main").find(".item-wrap");

        function minusDate(date,days){
            var d=new Date(date);
            d.setDate(d.getDate()-days);
            var m=d.getMonth()+1;
            return d.getFullYear()+'-'+m+'-'+d.getDate();
        }
        $(".choose-lib .select-btn").on("click",function(){
            $(this).next(".drop-down").toggle();
        });
        $(".choose-lib .drop-down .item").on("click",function(){
            $(this).parents(".drop-down").hide();
        });

        $(".play-btn,.pause-btn").on("click",function(){
            $(this).hide().siblings().show();
        });

        $(".check-detail").on("click",function(){
            detailLayer = layer.open({
                type: 1,
                shade: false,
                title: false, //不显示标题
                scrollbar :false,
                closeBtn :1,
                shade:0.5,
                shadeClose :true,
                area:["860px"],
                offset :["30px"],
                content: $('.form-device-dialog')
            });
            //window.deviceChart = new Chart(ctx);
            //window.deviceChart.Line(data,options);
            //window.deviceChart = new Chart(ctx, config);
            myChart.setOption(option);
            var　timeTicket = function(){};
            $(document).ready(function(){
                clearInterval(timeTicket);
                var　count = 11;
                timeTicket = setInterval(function (){
                    var　axisData = (new Date()).toLocaleTimeString().replace(/^\D*/,'');

                    //var data0 = option.series[0].data;
                    var data1 = option.series[0].data;
                    //data0.shift();
                    //data0.push(Math.round(Math.random() * 1000));
                    data1.shift();
                    data1.push((Math.ceil(Math.random()*20) *500));

                    option.xAxis[0].data.shift();
                    option.xAxis[0].data.push(axisData);
                    option.xAxis[1].data.shift();
                    option.xAxis[1].data.push(count++);

                    myChart.setOption(option);
                },1000);
            });
        });
        $(".form-device-dialog .device-header ul li").on("click",function(){
            $(".form-device-dialog .device-header ul li").removeClass("active");
            $(this).addClass("active");

        });

    });
</script>
</body>
</html>
